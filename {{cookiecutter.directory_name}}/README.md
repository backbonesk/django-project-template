# {{cookiecutter.directory_name}}

{{cookiecutter.description}}


### Information

- Using [PEP8](https://peps.python.org/pep-0008/) code style.
- Using **Semantic Commit Messages** described [here](https://gist.github.com/joshbuchea/6f47e86d2510bce28f8e7f42ae84c716) or in more detail [here](https://www.freecodecamp.org/news/how-to-write-better-git-commit-messages/).

## Database basic setup

### Load data from fixtures to DB:
`python manage.py loaddata [fixture ...]`

### Dump data from DB to fixtures:
`python manage.py dumpdata core.<ModelClassName> --indent 4 > apps/core/fixtures/<TableName>.json`

### Dump data from DB to fixtures:
`python manage.py dumpdata core.<ModelClassName> --indent 4 > apps/core/fixtures/<TableName>.json`

### Dump schema
#### MAC OS
`pg_dump --file "/Users/<USER>/<PATH>/<FILE_NAME>.sql" --host "<HOST>" --port "<PORT>" --username "<USERNAME>" --verbose --format=c --blobs --no-owner --section=pre-data --section=data --section=post-data --no-privileges --no-tablespaces --no-unlogged-table-data --no-comments "<DB_NAME>"`

### Restore schema
#### MAC OS
`pg_restore --host "<HOST>" --port "<PORT>" --username "<USERNAME>" --no-password --dbname "<DB_NAME>" --verbose "/Users/<USER>/<PATH>/<FILE_NAME>.sql"`

## Translations
- make .po file
```BASH
python manage.py makemessages -l <language:sk>
```
- compie translations | do not push
```BASH
python manage.py compilemessages -l <language:sk>
```
- set the default language in settings base
```python
LANGUAGE_CODE = '<language:sk>'
```

### Filters

Filtering is performed using a library [django_filter](https://github.com/carltongibson/django-filter).
Access control is performed to limit objects in the `queryset` according to the specific user right in
property `qs`.

### ObjectChecker

[django-object-checker](https://github.com/zurek11/django-object-checker) is used to check if the user has
the right to access the object.

The individual `ObjectCheckers` are located in the folder according to the settings:

`OBJECT_CHECKERS_MODULE = 'apps.core.checkers'`

Implementation of `ObjectCheckers` and their use is explained in detail in the `README.md` file.


## Usage

### Class-based Views

> To deny checking process in the class-based view, you need to specify, which method you want to mark.
> There are two levels of skipping auth check:
> 1. **EXEMPT_AUTH**: skips user authentication (auth header is no longer needed).
> 2. **EXEMPT_API_KEY**: skips request authentication (signature, api_key).

```python
from apps.api.views.base import SecuredView


class ExampleClassBasedView(SecuredView):
    EXEMPT_AUTH = ['GET']
    EXEMPT_API_KEY = ['GET', 'POST']
    REQUIRE_SUPERUSER = ['POST']

    def post(self, request):
        pass

    def get(self, request):
        pass
```

## Cron jobs

Rules generated by [crontab.guru](https://crontab.guru/).

| Active | Name                           | Rule          | Description                                               |
|--------|--------------------------------|---------------|-----------------------------------------------------------|
| True   | `example_job`                  | `30 * * * *`  | Example CRON job                                          |

---
Made with ❤️ and ☕️ BACKBONE s.r.o. (c) {% now 'utc', '%Y' %}
